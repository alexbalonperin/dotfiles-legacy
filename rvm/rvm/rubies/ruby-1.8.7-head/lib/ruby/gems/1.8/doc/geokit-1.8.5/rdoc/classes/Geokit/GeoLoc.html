<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Class: Geokit::GeoLoc</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href="../.././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Class</strong></td>
          <td class="class-name-in-header">Geokit::GeoLoc</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../../files/lib/geokit/geo_loc_rb.html">
                lib/geokit/geo_loc.rb
                </a>
        <br />
            </td>
        </tr>

        <tr class="top-aligned-row">
            <td><strong>Parent:</strong></td>
            <td>
                <a href="LatLng.html">
                LatLng
               </a>
            </td>
        </tr>
        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">

    <div id="description">
      <p>
This class encapsulates the result of a geocoding call. It&#8216;s primary
purpose is to homogenize the results of multiple geocoding providers. It
also provides some additional functionality, such as the &quot;full
address&quot; method for geocoders that do not provide a full address in
their results (for example, Yahoo), and the &quot;is_us&quot; method.
</p>
<p>
Some geocoders can return multple results. Geoloc can capture multiple
results through its &quot;all&quot; method.
</p>
<p>
For the geocoder setting the results, it would look something like this:
</p>
<pre>
    geo=GeoLoc.new(first_result)
    geo.all.push(second_result)
    geo.all.push(third_result)
</pre>
<p>
Then, for the user of the result:
</p>
<pre>
    puts geo.full_address     # just like usual
    puts geo.all.size  =&gt; 3   # there's three results total
    puts geo.all.first        # all is just an array or additional geolocs,
                                so do what you want with it
</pre>

    </div>


   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M000061">city=</a>&nbsp;&nbsp;
      <a href="#M000065">encode_with</a>&nbsp;&nbsp;
      <a href="#M000056">full_address</a>&nbsp;&nbsp;
      <a href="#M000059">hash</a>&nbsp;&nbsp;
      <a href="#M000054">is_us?</a>&nbsp;&nbsp;
      <a href="#M000053">new</a>&nbsp;&nbsp;
      <a href="#M000062">street_address=</a>&nbsp;&nbsp;
      <a href="#M000058">street_name</a>&nbsp;&nbsp;
      <a href="#M000057">street_number</a>&nbsp;&nbsp;
      <a href="#M000055">success?</a>&nbsp;&nbsp;
      <a href="#M000063">to_geocodeable_s</a>&nbsp;&nbsp;
      <a href="#M000060">to_hash</a>&nbsp;&nbsp;
      <a href="#M000066">to_s</a>&nbsp;&nbsp;
      <a href="#M000064">to_yaml_properties</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->

    <div id="section">





    <div id="attribute-list">
      <h3 class="section-bar">Attributes</h3>

      <div class="name-list">
        <table>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">accuracy</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc">
accuracy is set for Yahoo and Google geocoders, it is a numeric value of
the precision. see <a
href="http://code.google.com/apis/maps/documentation/geocoding/#GeocodingAccuracy">code.google.com/apis/maps/documentation/geocoding/#GeocodingAccuracy</a>

</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">all</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc"></td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">block_fips</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc">
FCC Attributes

</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">city</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc">
Location attributes. Full address is a concatenation of all values. For
example: 100 Spear St, San Francisco, CA, 94101, US Street number and
street name are extracted from the street address attribute if they
don&#8216;t exist

</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">country</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc">
Location attributes. Full address is a concatenation of all values. For
example: 100 Spear St, San Francisco, CA, 94101, US Street number and
street name are extracted from the street address attribute if they
don&#8216;t exist

</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">country_code</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc">
Location attributes. Full address is a concatenation of all values. For
example: 100 Spear St, San Francisco, CA, 94101, US Street number and
street name are extracted from the street address attribute if they
don&#8216;t exist

</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">district</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc"></td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">district_fips</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc">
FCC Attributes

</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">full_address</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc"></td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">neighborhood</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc"></td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">precision</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc">
Attributes set upon return from geocoding. Success will be true for
successful geocode lookups. The provider will be set to the name of the
providing geocoder. Finally, precision is an indicator of the accuracy of
the geocoding.

</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">provider</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc">
Attributes set upon return from geocoding. Success will be true for
successful geocode lookups. The provider will be set to the name of the
providing geocoder. Finally, precision is an indicator of the accuracy of
the geocoding.

</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">province</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc"></td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">state</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc">
Location attributes. Full address is a concatenation of all values. For
example: 100 Spear St, San Francisco, CA, 94101, US Street number and
street name are extracted from the street address attribute if they
don&#8216;t exist

</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">state_fips</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc">
FCC Attributes

</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">street_address</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc">
Location attributes. Full address is a concatenation of all values. For
example: 100 Spear St, San Francisco, CA, 94101, US Street number and
street name are extracted from the street address attribute if they
don&#8216;t exist

</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">street_name</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc">
Location attributes. Full address is a concatenation of all values. For
example: 100 Spear St, San Francisco, CA, 94101, US Street number and
street name are extracted from the street address attribute if they
don&#8216;t exist

</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">street_number</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc">
Location attributes. Full address is a concatenation of all values. For
example: 100 Spear St, San Francisco, CA, 94101, US Street number and
street name are extracted from the street address attribute if they
don&#8216;t exist

</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">sub_premise</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc"></td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">success</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc">
Attributes set upon return from geocoding. Success will be true for
successful geocode lookups. The provider will be set to the name of the
providing geocoder. Finally, precision is an indicator of the accuracy of
the geocoding.

</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">suggested_bounds</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc">
Attributes set upon return from geocoding. Success will be true for
successful geocode lookups. The provider will be set to the name of the
providing geocoder. Finally, precision is an indicator of the accuracy of
the geocoding.

</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">zip</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc">
Location attributes. Full address is a concatenation of all values. For
example: 100 Spear St, San Francisco, CA, 94101, US Street number and
street name are extracted from the street address attribute if they
don&#8216;t exist

</td>
        </tr>
        </table>
      </div>
    </div>
      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Class methods</h3>

      <div id="method-M000053" class="method-detail">
        <a name="M000053"></a>

        <div class="method-heading">
          <a href="GeoLoc.src/M000053.html" target="Code" class="method-signature"
            onclick="popupCode('GeoLoc.src/M000053.html');return false;">
          <span class="method-name">new</span><span class="method-args">(h={})</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Constructor expects a <a href="GeoLoc.html#M000059">hash</a> of symbols to
correspond with attributes.
</p>
        </div>
      </div>

      <h3 class="section-bar">Public Instance methods</h3>

      <div id="method-M000061" class="method-detail">
        <a name="M000061"></a>

        <div class="method-heading">
          <a href="GeoLoc.src/M000061.html" target="Code" class="method-signature"
            onclick="popupCode('GeoLoc.src/M000061.html');return false;">
          <span class="method-name">city=</span><span class="method-args">(city)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Sets the city after capitalizing each word within the city name.
</p>
        </div>
      </div>

      <div id="method-M000065" class="method-detail">
        <a name="M000065"></a>

        <div class="method-heading">
          <a href="GeoLoc.src/M000065.html" target="Code" class="method-signature"
            onclick="popupCode('GeoLoc.src/M000065.html');return false;">
          <span class="method-name">encode_with</span><span class="method-args">(coder)</span>
          </a>
        </div>
      
        <div class="method-description">
        </div>
      </div>

      <div id="method-M000056" class="method-detail">
        <a name="M000056"></a>

        <div class="method-heading">
          <a href="GeoLoc.src/M000056.html" target="Code" class="method-signature"
            onclick="popupCode('GeoLoc.src/M000056.html');return false;">
          <span class="method-name">full_address</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
<a href="GeoLoc.html#M000056">full_address</a> is provided by google but
not by yahoo. It is intended that the google geocoding method will provide
the full address, whereas for yahoo it will be derived from the parts of
the address we do have.
</p>
        </div>
      </div>

      <div id="method-M000059" class="method-detail">
        <a name="M000059"></a>

        <div class="method-heading">
          <a href="GeoLoc.src/M000059.html" target="Code" class="method-signature"
            onclick="popupCode('GeoLoc.src/M000059.html');return false;">
          <span class="method-name">hash</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
gives you all the important fields as key-value pairs
</p>
        </div>
      </div>

      <div id="method-M000054" class="method-detail">
        <a name="M000054"></a>

        <div class="method-heading">
          <a href="GeoLoc.src/M000054.html" target="Code" class="method-signature"
            onclick="popupCode('GeoLoc.src/M000054.html');return false;">
          <span class="method-name">is_us?</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns true if geocoded to the United States.
</p>
        </div>
      </div>

      <div id="method-M000062" class="method-detail">
        <a name="M000062"></a>

        <div class="method-heading">
          <a href="GeoLoc.src/M000062.html" target="Code" class="method-signature"
            onclick="popupCode('GeoLoc.src/M000062.html');return false;">
          <span class="method-name">street_address=</span><span class="method-args">(address)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Sets the street address after capitalizing each word within the street
address.
</p>
        </div>
      </div>

      <div id="method-M000058" class="method-detail">
        <a name="M000058"></a>

        <div class="method-heading">
          <a href="GeoLoc.src/M000058.html" target="Code" class="method-signature"
            onclick="popupCode('GeoLoc.src/M000058.html');return false;">
          <span class="method-name">street_name</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns the street name portion of the street address where possible
</p>
        </div>
      </div>

      <div id="method-M000057" class="method-detail">
        <a name="M000057"></a>

        <div class="method-heading">
          <a href="GeoLoc.src/M000057.html" target="Code" class="method-signature"
            onclick="popupCode('GeoLoc.src/M000057.html');return false;">
          <span class="method-name">street_number</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Extracts the street number from the street address where possible.
</p>
        </div>
      </div>

      <div id="method-M000055" class="method-detail">
        <a name="M000055"></a>

        <div class="method-heading">
          <a href="GeoLoc.src/M000055.html" target="Code" class="method-signature"
            onclick="popupCode('GeoLoc.src/M000055.html');return false;">
          <span class="method-name">success?</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
        </div>
      </div>

      <div id="method-M000063" class="method-detail">
        <a name="M000063"></a>

        <div class="method-heading">
          <a href="GeoLoc.src/M000063.html" target="Code" class="method-signature"
            onclick="popupCode('GeoLoc.src/M000063.html');return false;">
          <span class="method-name">to_geocodeable_s</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns a comma-delimited string consisting of the street address, city,
state, zip, and country code. Only includes those attributes that are
non-blank.
</p>
        </div>
      </div>

      <div id="method-M000060" class="method-detail">
        <a name="M000060"></a>

        <div class="method-heading">
          <span class="method-name">to_hash</span><span class="method-args">()</span>
        </div>
      
        <div class="method-description">
          <p>
Alias for <a href="GeoLoc.html#M000059">hash</a>
</p>
        </div>
      </div>

      <div id="method-M000066" class="method-detail">
        <a name="M000066"></a>

        <div class="method-heading">
          <a href="GeoLoc.src/M000066.html" target="Code" class="method-signature"
            onclick="popupCode('GeoLoc.src/M000066.html');return false;">
          <span class="method-name">to_s</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns a string representation of the instance.
</p>
        </div>
      </div>

      <div id="method-M000064" class="method-detail">
        <a name="M000064"></a>

        <div class="method-heading">
          <a href="GeoLoc.src/M000064.html" target="Code" class="method-signature"
            onclick="popupCode('GeoLoc.src/M000064.html');return false;">
          <span class="method-name">to_yaml_properties</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>